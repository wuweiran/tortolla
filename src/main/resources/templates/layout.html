<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity5">
<head th:fragment="site-head">
    <meta charset="UTF-8"/>
    <link href="../static/css/styles.css" rel="stylesheet" th:href="@{/css/styles.css}"/>
    <link href="../static/img/favicon.ico" rel="icon" th:href="@{/img/favicon.ico}"/>
    <script src="../static/js/jquery-3.4.1.min.js" th:src="@{/js/jquery-3.4.1.min.js}"></script>
    <script src="../static/js/blog-scripts.js" th:src="@{/js/blog-scripts.js}"></script>
</head>
<body>
<header th:fragment="site-header">
    <header>
        <a href="index.html" th:href="@{/}"><img src="../static/img/site-logo.png" th:src="@{/img/site-logo.png}"/></a>
        <a href="index.html" th:href="@{/}" th:text="#{header.tab.home}"></a>
        <a href="posts/index.html" th:href="@{/posts}" th:text="#{header.tab.posts}"></a>
        <a href="posts/create.html" th:href="@{/posts/create}" th:text="#{header.tab.createpost}"></a>
        <a href="bloggers/index.html" th:href="@{/bloggers}" th:text="#{header.tab.blogger}"></a>
        <div id="logged-in-info">
            <form method="post" th:action="@{/bloggers/logout}" sec:authorize="isAuthenticated()">
                <span>Hello, <b sec:authentication="name"></b></span>
                <a href="bloggers/register.html" th:href="@{/bloggers/logout}" sec:authorize="isAuthenticated()">
                    <button class="logged-in-button" id="logout-button"><span th:text="#{header.login.logout}"></span></button>
                </a>
            </form>
            <a href="bloggers/login.html" th:href="@{/bloggers/login}" sec:authorize="!isAuthenticated()">
                <button class="logged-in-button" id="login-button"><span th:text="#{header.login.login}"></span></button>
            </a>
            <a href="bloggers/register.html" th:href="@{/bloggers/register}" sec:authorize="!isAuthenticated()">
                <button class="logged-in-button" id="register-button"><span th:text="#{header.login.register}"></span></button>
            </a>
        </div>
    </header>
    <ul id="messages"
        th:with="notifyMessages=${session[T(clan.midnight.tortolla.services.NotificationServiceImpl).NOTIFY_MSG_SESSION_KEY]}">
        <li th:class="${#strings.toLowerCase(msg.type)}" th:each="msg : ${notifyMessages}" th:text="${msg.text}"></li>
        <span th:if="${notifyMessages}" th:remove="all" th:text="${#session.removeAttribute(
          T(clan.midnight.tortolla.services.NotificationServiceImpl).NOTIFY_MSG_SESSION_KEY)}"></span>
    </ul>
</header>
<footer th:fragment="site-footer">
    <div id="copyright" th:text="#{footer.copyright}"></div>
    <p/><div id="lang-switch">
    <a href="?lang=zh_CN">中文（中国）</a>
    <br><a href="?lang=en_US">English(US)</a>
    </div>
</footer>
</body>
</html>